# Smart Table Agent：基于 MCP 架构的 Figma 智能表格解决方案

## 1. 项目定位
本项目不是一个普通的效率工具，而是一个**嵌入设计环境的垂直领域 AI Agent（智能体）**。它利用多模态大模型能力，将自然语言和视觉图像转化为高精度的 Figma 表格设计，实现“所想即所得”的自动化构建与迭代。

## 2. 技术架构：MCP (Model Context Protocol) 模式
本项目采用了业界前沿的 **MCP 架构**，实现了“模型决策”与“工具执行”的完全解耦，确保了系统的稳定性和可扩展性。

*   **Model (大脑 - 决策层)**
    *   负责理解用户模糊的自然语言指令（如“优化排版”）和视觉上下文（设计稿截图）。
    *   **不直接生成代码**，而是输出符合协议的标准化决策指令。
*   **Context Protocol (协议 - 交互层)**
    *   **上下文注入**：实时将 Figma 中的表格状态（行/列数据、组件属性）标准化为 Context 发送给模型。
    *   **指令协议 (`AiTableEnvelope`)**：定义了一套结构化的 JSON 交互标准（如 `set_column_width`, `set_cell_type`, `apply_action_component`），屏蔽了底层 API 的复杂性。
*   **Plugin Client (手眼 - 执行层)**
    *   **工具化 (Tools)**：将 Figma 的原子操作（如“切换变体”、“调整列宽”、“填充数据”）封装为模型可调用的标准工具。
    *   **精准执行**：插件作为 Runtime，接收并无损执行模型的 JSON 指令，确保设计规范的严格落地。

## 3. 核心竞争力
*   **Agent 闭环能力**：具备**感知**（识别图片/DOM）、**决策**（推导布局/样式）和**执行**（调用 Figma API）的完整闭环，能处理复杂的“操作列识别”、“自适应布局”等高阶任务。
*   **设计标准化**：Agent 直接调用标准组件库（Design System），确保生成的每一个单元格都严格符合设计规范，消除了人工搭建的随意性。
*   **高可扩展性**：基于 MCP 协议的设计使得新增功能（如支持新的组件类型）只需在协议层扩展定义，无需重构模型逻辑，具备极强的演进能力。

## 4. 业务价值
*   **极致提效**：将复杂表格的绘制与修改时间从**分钟级压缩至秒级**。
*   **降低门槛**：让非专业设计师也能通过简单的对话，产出符合高保真标准的设计稿。
